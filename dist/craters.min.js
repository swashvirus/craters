(()=>{var t={450:(t,e,s)=>{var o=new Object;"undefined"==typeof window&&s.g&&(s.g.window={performance:{now:function(t){if(!t)return Date.now();var e=Date.now(t);return Math.round(1e3*e[0]+e[1]/1e6)}},requestAnimationFrame:function(t){setImmediate((()=>t(this.performance.now())))}}),window.cg=o}},e={};function s(o){var n=e[o];if(void 0!==n)return n.exports;var r=e[o]={exports:{}};return t[o](r,r.exports,s),r.exports}s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{"use strict";function t(t,s,n,r){var i;i=s?new e(t,0,n,r):new o(t,0,n,r),this.root=i}function e(t,e,s,o){this._bounds=t,this.children=[],this.nodes=[],o&&(this._maxChildren=o),s&&(this._maxDepth=s),e&&(this._depth=e)}function o(t,s,o,n){e.call(this,t,s,o,n),this._stuckChildren=[]}function n(t,e){this.x=t||0,this.y=e||0}s(450),t.prototype.root=null,t.prototype.insert=function(t){if(t instanceof Array){var e,s=t.length;for(e=0;e<s;e++)this.root.insert(t[e])}else this.root.insert(t)},t.prototype.clear=function(){this.root.clear()},t.prototype.retrieve=function(t){return this.root.retrieve(t).slice(0)},e.prototype.nodes=null,e.prototype._classConstructor=e,e.prototype.children=null,e.prototype._bounds=null,e.prototype._depth=0,e.prototype._maxChildren=4,e.prototype._maxDepth=4,e.TOP_LEFT=0,e.TOP_RIGHT=1,e.BOTTOM_LEFT=2,e.BOTTOM_RIGHT=3,e.prototype.insert=function(t){if(this.nodes.length){var e=this._findIndex(t);this.nodes[e].insert(t)}else{this.children.push(t);var s=this.children.length;if(!(this._depth>=this._maxDepth)&&s>this._maxChildren){var o;for(this.subdivide(),o=0;o<s;o++)this.insert(this.children[o]);this.children.length=0}}},e.prototype.retrieve=function(t){if(this.nodes.length){var e=this._findIndex(t);return this.nodes[e].retrieve(t)}return this.children},e.prototype._findIndex=function(t){var s=this._bounds,o=!(t.x>s.x+s.width/2),n=!(t.y>s.y+s.height/2),r=e.TOP_LEFT;return o?n||(r=e.BOTTOM_LEFT):r=n?e.TOP_RIGHT:e.BOTTOM_RIGHT,r},e.prototype.subdivide=function(){var t=this._depth+1,s=this._bounds.x,o=this._bounds.y,n=this._bounds.width/2,r=this._bounds.height/2,i=s+n,h=o+r;this.nodes[e.TOP_LEFT]=new this._classConstructor({x:s,y:o,width:n,height:r},t,this._maxDepth,this._maxChildren),this.nodes[e.TOP_RIGHT]=new this._classConstructor({x:i,y:o,width:n,height:r},t,this._maxDepth,this._maxChildren),this.nodes[e.BOTTOM_LEFT]=new this._classConstructor({x:s,y:h,width:n,height:r},t,this._maxDepth,this._maxChildren),this.nodes[e.BOTTOM_RIGHT]=new this._classConstructor({x:i,y:h,width:n,height:r},t,this._maxDepth,this._maxChildren)},e.prototype.clear=function(){this.children.length=0;var t,e=this.nodes.length;for(t=0;t<e;t++)this.nodes[t].clear();this.nodes.length=0},o.prototype=new e,o.prototype._classConstructor=o,o.prototype._stuckChildren=null,o.prototype._out=[],o.prototype.insert=function(t){if(this.nodes.length){var e=this._findIndex(t),s=this.nodes[e];t.x>=s._bounds.x&&t.x+t.width<=s._bounds.x+s._bounds.width&&t.y>=s._bounds.y&&t.y+t.height<=s._bounds.y+s._bounds.height?this.nodes[e].insert(t):this._stuckChildren.push(t)}else{this.children.push(t);var o=this.children.length;if(!(this._depth>=this._maxDepth)&&o>this._maxChildren){var n;for(this.subdivide(),n=0;n<o;n++)this.insert(this.children[n]);this.children.length=0}}},o.prototype.getChildren=function(){return this.children.concat(this._stuckChildren)},o.prototype.retrieve=function(t){var s=this._out;if(s.length=0,this.nodes.length){var o=this._findIndex(t),n=this.nodes[o];t.x>=n._bounds.x&&t.x+t.width<=n._bounds.x+n._bounds.width&&t.y>=n._bounds.y&&t.y+t.height<=n._bounds.y+n._bounds.height?s.push.apply(s,this.nodes[o].retrieve(t)):(t.x<=this.nodes[e.TOP_RIGHT]._bounds.x&&(t.y<=this.nodes[e.BOTTOM_LEFT]._bounds.y&&s.push.apply(s,this.nodes[e.TOP_LEFT].getAllContent()),t.y+t.height>this.nodes[e.BOTTOM_LEFT]._bounds.y&&s.push.apply(s,this.nodes[e.BOTTOM_LEFT].getAllContent())),t.x+t.width>this.nodes[e.TOP_RIGHT]._bounds.x&&(t.y<=this.nodes[e.BOTTOM_RIGHT]._bounds.y&&s.push.apply(s,this.nodes[e.TOP_RIGHT].getAllContent()),t.y+t.height>this.nodes[e.BOTTOM_RIGHT]._bounds.y&&s.push.apply(s,this.nodes[e.BOTTOM_RIGHT].getAllContent())))}return s.push.apply(s,this._stuckChildren),s.push.apply(s,this.children),s},o.prototype.getAllContent=function(){var t,e=this._out;if(this.nodes.length)for(t=0;t<this.nodes.length;t++)this.nodes[t].getAllContent();return e.push.apply(e,this._stuckChildren),e.push.apply(e,this.children),e},o.prototype.clear=function(){this._stuckChildren.length=0,this.children.length=0;var t=this.nodes.length;if(t){var e;for(e=0;e<t;e++)this.nodes[e].clear();this.nodes.length=0}},n.prototype.copy=n.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},n.prototype.clone=n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.perp=n.prototype.perp=function(){var t=this.x;return this.x=this.y,this.y=-t,this},n.prototype.rotate=n.prototype.rotate=function(t){var e=this.x,s=this.y;return this.x=e*Math.cos(t)-s*Math.sin(t),this.y=e*Math.sin(t)+s*Math.cos(t),this},n.prototype.reverse=n.prototype.reverse=function(){return this.x=-this.x,this.y=-this.y,this},n.prototype.normalize=n.prototype.normalize=function(){var t=this.len();return t>0&&(this.x=this.x/t,this.y=this.y/t),this},n.prototype.add=n.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},n.prototype.sub=n.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},n.prototype.scale=n.prototype.scale=function(t,e){return this.x*=t,this.y*=void 0!==e?e:t,this},n.prototype.project=n.prototype.project=function(t){var e=this.dot(t)/t.len2();return this.x=e*t.x,this.y=e*t.y,this},n.prototype.projectN=n.prototype.projectN=function(t){var e=this.dot(t);return this.x=e*t.x,this.y=e*t.y,this},n.prototype.reflect=n.prototype.reflect=function(t){var e=this.x,s=this.y;return this.project(t).scale(2),this.x-=e,this.y-=s,this},n.prototype.reflectN=n.prototype.reflectN=function(t){var e=this.x,s=this.y;return this.projectN(t).scale(2),this.x-=e,this.y-=s,this},n.prototype.dot=n.prototype.dot=function(t){return this.x*t.x+this.y*t.y},n.prototype.len2=n.prototype.len2=function(){return this.dot(this)},n.prototype.len=n.prototype.len=function(){return Math.sqrt(this.len2())};class r{constructor(t,e){this.type="polygon",this.pos=t||new n,this.angle=0,this.offset=new n,this.setPoints(e||[])}setPoints(t){if(!this.points||this.points.length!==t.length){var e,s=this.calcPoints=[],o=this.edges=[],r=this.normals=[];for(e=0;e<t.length;e++){var i=t[e],h=e<t.length-1?t[e+1]:t[0];i===h||i.x!==h.x||i.y!==h.y?(s.push(new n),o.push(new n),r.push(new n)):(t.splice(e,1),e-=1)}}return this.points=t,this._recalc(),this}setAngle(t){return this.angle=t,this._recalc(),this}setOffset(t){return this.offset=t,this._recalc(),this}rotate(t){for(var e=this.points,s=e.length,o=0;o<s;o++)e[o].rotate(t);return this._recalc(),this}translate(t,e){for(var s=this.points,o=s.length,n=0;n<o;n++)s[n].x+=t,s[n].y+=e;return this._recalc(),this}_recalc(){var t,e=this.calcPoints,s=this.edges,o=this.normals,n=this.points,r=this.offset,i=this.angle,h=n.length;for(t=0;t<h;t++){var p=e[t].copy(n[t]);p.x+=r.x,p.y+=r.y,0!==i&&p.rotate(i)}for(t=0;t<h;t++){var l=e[t],a=t<h-1?e[t+1]:e[0],u=s[t].copy(a).sub(l);o[t].copy(u).perp().normalize()}return this}getAABB(){for(var t=this.calcPoints,e=t.length,s=t[0].x,o=t[0].y,r=t[0].x,h=t[0].y,p=1;p<e;p++){var l=t[p];l.x<s?s=l.x:l.x>r&&(r=l.x),l.y<o?o=l.y:l.y>h&&(h=l.y)}return new i(this.pos.clone().add(new n(s,o)),r-s,h-o).toPolygon()}getCentroid(){for(var t=this.calcPoints,e=t.length,s=0,o=0,r=0,i=0;i<e;i++){var h=t[i],p=i===e-1?t[0]:t[i+1],l=h.x*p.y-p.x*h.y;s+=(h.x+p.x)*l,o+=(h.y+p.y)*l,r+=l}return new n(s/=r*=3,o/=r)}}class i{constructor(t,e,s){this.pos=t||new n,this.w=e||0,this.h=s||0}toPolygon(){var t=this.pos,e=this.w,s=this.h;return new r(new n(t.x,t.y),[new n,new n(e,0),new n(e,s),new n(0,s)])}}var h={AABB:i,Circle:class{constructor(t,e){this.type="circle",this.pos=t||new n,this.r=e||0,this.offset=new n}getAABB(){var t=this.r,e=this.pos.clone().add(this.offset).sub(new n(t,t));return new i(e,2*t,2*t).toPolygon()}getCentroid(){let t=this.getAABB(),e=t.edges[3].x,s=t.edges[2].y;return new n((t.edges[0].x-e)/2,(t.edges[1].y-s)/2)}setOffset(t){return this.offset=t,this}},Polygon:r};function p(){this.a=null,this.b=null,this.overlapN=new n,this.overlapV=new n,this.clear()}h.Response=p,p.prototype.clear=p.prototype.clear=function(){return this.aInB=!0,this.bInA=!0,this.overlap=Number.MAX_VALUE,this};for(var l=[],a=0;a<10;a++)l.push(new n);var u=[];for(a=0;a<5;a++)u.push([]);var c=new p,y=new i(new n,1e-6,1e-6).toPolygon();function d(t,e,s){for(var o=Number.MAX_VALUE,n=-Number.MAX_VALUE,r=t.length,i=0;i<r;i++){var h=t[i].dot(e);h<o&&(o=h),h>n&&(n=h)}s[0]=o,s[1]=n}function f(t,e,s,o,n,r){var i=u.pop(),h=u.pop(),p=l.pop().copy(e).sub(t),a=p.dot(n);if(d(s,n,i),d(o,n,h),h[0]+=a,h[1]+=a,i[0]>h[1]||h[0]>i[1])return l.push(p),u.push(i),u.push(h),!0;if(r){var c,y,f=0;i[0]<h[0]?(r.aInB=!1,i[1]<h[1]?(f=i[1]-h[0],r.bInA=!1):f=(c=i[1]-h[0])<(y=h[1]-i[0])?c:-y):(r.bInA=!1,i[1]>h[1]?(f=i[0]-h[1],r.aInB=!1):f=(c=i[1]-h[0])<(y=h[1]-i[0])?c:-y);var v=Math.abs(f);v<r.overlap&&(r.overlap=v,r.overlapN.copy(n),f<0&&r.overlapN.reverse())}return l.push(p),u.push(i),u.push(h),!1}function v(t,e){var s=t.len2(),o=e.dot(t);return o<0?_:o>s?g:x}h.isSeparatingAxis=f;var _=-1,x=0,g=1;function b(t,e,s){for(var o=l.pop().copy(e.pos).add(e.offset).sub(t.pos),n=e.r,r=n*n,i=t.calcPoints,h=i.length,p=l.pop(),a=l.pop(),u=0;u<h;u++){var c=u===h-1?0:u+1,y=0===u?h-1:u-1,d=0,f=null;p.copy(t.edges[u]),a.copy(o).sub(i[u]),s&&a.len2()>r&&(s.aInB=!1);var x=v(p,a);if(x===_){p.copy(t.edges[y]);var b=l.pop().copy(o).sub(i[y]);if((x=v(p,b))===g){if((T=a.len())>n)return l.push(o),l.push(p),l.push(a),l.push(b),!1;s&&(s.bInA=!1,f=a.normalize(),d=n-T)}l.push(b)}else if(x===g){if(p.copy(t.edges[c]),a.copy(o).sub(i[c]),(x=v(p,a))===_){if((T=a.len())>n)return l.push(o),l.push(p),l.push(a),!1;s&&(s.bInA=!1,f=a.normalize(),d=n-T)}}else{var w=p.perp().normalize(),T=a.dot(w),I=Math.abs(T);if(T>0&&I>n)return l.push(o),l.push(w),l.push(a),!1;s&&(f=w,d=n-T,(T>=0||d<2*n)&&(s.bInA=!1))}f&&s&&Math.abs(d)<Math.abs(s.overlap)&&(s.overlap=d,s.overlapN.copy(f))}return s&&(s.a=t,s.b=e,s.overlapV.copy(s.overlapN).scale(s.overlap)),l.push(o),l.push(p),l.push(a),!0}function w(t,e,s){for(var o=t.calcPoints,n=o.length,r=e.calcPoints,i=r.length,h=0;h<n;h++)if(f(t.pos,e.pos,o,r,t.normals[h],s))return!1;for(h=0;h<i;h++)if(f(t.pos,e.pos,o,r,e.normals[h],s))return!1;return s&&(s.a=t,s.b=e,s.overlapV.copy(s.overlapN).scale(s.overlap)),!0}h.pointInCircle=function(t,e){var s=l.pop().copy(t).sub(e.pos).sub(e.offset),o=e.r*e.r,n=s.len2();return l.push(s),n<=o},h.pointInPolygon=function(t,e){y.pos.copy(t),c.clear();var s=w(y,e,c);return s&&(s=c.aInB),s},h.testCircleCircle=function(t,e,s){var o=l.pop().copy(e.pos).add(e.offset).sub(t.pos).sub(t.offset),n=t.r+e.r,r=n*n,i=o.len2();if(i>r)return l.push(o),!1;if(s){var h=Math.sqrt(i);s.a=t,s.b=e,s.overlap=n-h,s.overlapN.copy(o.normalize()),s.overlapV.copy(o).scale(s.overlap),s.aInB=t.r<=e.r&&h<=e.r-t.r,s.bInA=e.r<=t.r&&h<=t.r-e.r}return l.push(o),!0},h.testPolygonCircle=b,h.testCirclePolygon=function(t,e,s){var o=b(e,t,s);if(o&&s){var n=s.a,r=s.aInB;s.overlapN.reverse(),s.overlapV.reverse(),s.a=s.b,s.b=n,s.aInB=s.bInA,s.bInA=r}return o},h.testPolygonPolygon=w})()})();